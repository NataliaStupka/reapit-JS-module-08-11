{"mappings":"AAAAA,QAAQC,IAAI,oBAGL,MAADC,EAAS,CACb,cACA,UACA,kBACA,aACA,cAGF,IAAIC,EAAc,EACP,MAALC,EAAO,CACXC,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,6BA+CH,SAAxBI,EAAkBC,GACzBR,EAAKI,YAAYK,YAAcD,C,CAEjC,SAASE,EAAoBF,GAC3BR,EAAKK,cAAcI,YAAcD,C,CAhDnCR,EAAKC,SAASU,iBAAiB,SAE/B,WACEZ,GAAe,EACf,MAAMa,EAAWd,EAAOe,KAAIC,GAyDhB,SAADA,GAEK,OAAT,IAAIC,SAAQC,IACjB,MAAMC,GASaC,EATQ,IASHC,EATS,KAU5BC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,GAAKA,IADtD,IAAuBA,EAAKC,EAPxBI,YAAW,KACTP,EAAQ,C,MAAEF,E,KAAOG,GAAO,GACvBA,EAAK,G,CAhE2BO,CAAIV,KAEzCP,EAAkB,IACoBG,EAAlB,4CACkCd,QAA9CC,IACN,8CACkC,kCAOb4B,EALPb,EAOgCG,QAAxCW,KAAKD,GAAgBE,MAAK,EAACb,MAAEA,EAAKG,KAAEA,MAC1CV,EAAkB,YAACO,2BAAwBG,KACpBrB,QAAfC,IACN,eAACiB,2BAA2BG,IAAA,kCA6BT,UAAEH,MAAEA,EAAKG,KAAEA,EAAMW,YAAAC,IACxC,MAAMC,EAAK,mBACDD,qBACAf,qBACAG,oBAEVjB,EAAKM,UAAUyB,mBAAmB,YAAaD,E,CAhC7CE,CAAkB,C,MAAElB,E,KAAOG,E,YAAMlB,GAAc,IAK9B,SAAD0B,GAE2BV,QAArCkB,IAAIR,GAAgBE,MAAKO,IAC/BxB,EAAoB,yCAEYd,QAAxBC,IAAI,gBAA4BqC,GAC7BtC,QAAHC,IACN,2CACgC,gCACjC,G,CA1BgBsC,CAARvB,GAIM,IAAMa,C","sources":["src/module-09-Repeta/practice-09.js"],"sourcesContent":["console.log('Module-09-Repeta');\n\n// ------- 2. Іподром --------------------------\nconst horses = [\n  'Secretarial',\n  'Eclipce',\n  'West Australian',\n  'Flying Fox',\n  'Seabiscuit',\n];\n\nlet raceCounter = 0; //номер заїзду\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerField: document.querySelector('.js-winner'),\n  progressField: document.querySelector('.js-progress'),\n  tableBody: document.querySelector('.js-result-table > tbody'),\n};\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n  raceCounter += 1;\n  const promises = horses.map(horse => run(horse));\n  // console.log(promises);\n  updateWinnerField(``); //очищуємо поле переможця перед новим заїздом\n  updateProgressField('Заїзд розпочався, ставки не приймаються!'); //оновлення поля прогрес\n  console.log(\n    '%c Заїзд розпочався, ставки не приймаються!',\n    'color: brown; font-size: 14px;'\n  );\n  determineWinner(promises); //визначення переможця\n  waitForAll(promises); //всі учасники фінішували\n}\n\n//визначення переможця\nfunction determineWinner(horsesPromises) {\n  //Promise.race приймає масив промісів, повертає один перший виконанний\n  Promise.race(horsesPromises).then(({ horse, time }) => {\n    updateWinnerField(`Переміг '${horse}', фінішував із часом: ${time}`);\n    console.log(\n      `%c Переміг '${horse}', фінішував із часом: ${time}`,\n      'color: green; font-size: 14px;'\n    );\n    updateResultTable({ horse, time, raceCounter });\n  });\n}\n\n//очікуємо всіх учасників\nfunction waitForAll(horsesPromises) {\n  // Promise.all приймає масив промісів, повертає всі проміси масивом\n  Promise.all(horsesPromises).then(x => {\n    updateProgressField('Заїзд закінчився, приймаються ставки.');\n\n    console.log('Усі учасники:', x);\n    console.log(\n      '%c Заїзд закінчився, приймаються ставки.',\n      'color: blue; font-size: 14px;'\n    );\n  });\n}\n\n//оновлення полів переможця і прогрессу\nfunction updateWinnerField(message) {\n  refs.winnerField.textContent = message;\n}\nfunction updateProgressField(message) {\n  refs.progressField.textContent = message;\n}\n//оновлення таблиці переможця\nfunction updateResultTable({ horse, time, raceCounter }) {\n  const tr = `<tr>\n      <td>${raceCounter}</td>\n      <td>${horse}</td>\n      <td>${time}</td>\n    </tr>`;\n  refs.tableBody.insertAdjacentHTML('beforeend', tr);\n}\n\n//запускаємо коня\nfunction run(horse) {\n  //повертаємо проміс\n  return new Promise(resolve => {\n    const time = getRandomTime(2000, 3500);\n\n    setTimeout(() => {\n      resolve({ horse, time });\n    }, time);\n  });\n}\n\n//імітація бігу коня\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n"],"names":["console","log","$ba6dc944159f8954$var$horses","$ba6dc944159f8954$var$raceCounter","$ba6dc944159f8954$var$refs","startBtn","document","querySelector","winnerField","progressField","tableBody","$ba6dc944159f8954$var$updateWinnerField","message","textContent","$ba6dc944159f8954$var$updateProgressField","addEventListener","promises","map","horse","Promise","resolve","time","min","max","Math","floor","random","setTimeout","$ba6dc944159f8954$var$run","horsesPromises","race","then","raceCounter","raceCounter1","tr","insertAdjacentHTML","$ba6dc944159f8954$var$updateResultTable","all","x","$ba6dc944159f8954$var$waitForAll"],"version":3,"file":"module-09-Repeta.58a1a75a.js.map"}