{"mappings":"YAAAA,QAAQC,IAAI,oBAGL,IAADC,EAAS,CACb,cACA,UACA,kBACA,aACA,cAGEC,EAAc,EACZC,EAAO,CACXC,SAAUC,SAASC,cAAc,kBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,6BA+CH,SAAxBI,EAAkBC,GACzBR,EAAKI,YAAYK,YAAcD,C,CAEjC,SAASE,EAAoBF,GAC3BR,EAAKK,cAAcI,YAAcD,C,CAhDnCR,EAAKC,SAASU,iBAAiB,SAE/B,WACEZ,GAAe,EACf,IAAMa,EAAWd,EAAOe,KAAI,SAAAC,G,OAyDhB,SAADA,GAEK,OAAT,IAAIC,SAAQ,SAAAC,GACjB,IASmBC,EAAKC,EATlBC,GASaF,EATQ,IASHC,EATS,KAU5BE,KAAKC,MAAMD,KAAKE,UAAYJ,EAAMD,EAAM,GAAKA,IARlDM,YAAW,WACTP,EAAQ,CAAEF,QAAOK,Q,GAChBA,E,IAhEgCK,CAAIV,E,IAEzCP,EAAmB,IACmBG,EAAlB,4CACkCd,QAA9CC,IACN,8CACkC,kCAOb4B,EALPb,EAOgCG,QAAxCW,KAAKD,GAAgBE,MAAK,SAAAC,G,IAAGd,EAAKc,EAALd,MAAOK,EAAIS,EAAJT,KAC1CZ,EAAkB,YAAkDsB,OAA/Bf,EAAM,2BAA8Ce,OAALV,IAC7DvB,QAAfC,IACN,eAAqDgC,OAA/Bf,EAAM,2BAA8Ce,OAALV,GAC9C,kCA4BJ,SAAES,G,IAAEd,EAAFc,EAAEd,MAAOK,EAATS,EAAST,KAAMW,EAAfF,EAAeG,YAClCC,EAAK,mBAEDH,OADAC,EAAY,qBAEZD,OADAf,EAAM,qBACDe,OAALV,EAAK,oBAEfnB,EAAKM,UAAU2B,mBAAmB,YAAaD,E,CAhC7CE,CAAkB,CAAEpB,QAAOK,OAAMY,YAAAhC,G,IAKhB,SAAD0B,GAE2BV,QAArCoB,IAAIV,GAAgBE,MAAK,SAAAS,GAC/B1B,EAAoB,yCAEYd,QAAxBC,IAAI,gBAA4BuC,GAC7BxC,QAAHC,IACN,2CACgC,gC,IAzBjBwC,CAARzB,GAIM,IAAMa,C","sources":["src/module-09-Repeta/practice-09.js"],"sourcesContent":["console.log('Module-09-Repeta');\n\n// ------- 2. Іподром --------------------------\nconst horses = [\n  'Secretarial',\n  'Eclipce',\n  'West Australian',\n  'Flying Fox',\n  'Seabiscuit',\n];\n\nlet raceCounter = 0; //номер заїзду\nconst refs = {\n  startBtn: document.querySelector('.js-start-race'),\n  winnerField: document.querySelector('.js-winner'),\n  progressField: document.querySelector('.js-progress'),\n  tableBody: document.querySelector('.js-result-table > tbody'),\n};\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n  raceCounter += 1;\n  const promises = horses.map(horse => run(horse));\n  // console.log(promises);\n  updateWinnerField(``); //очищуємо поле переможця перед новим заїздом\n  updateProgressField('Заїзд розпочався, ставки не приймаються!'); //оновлення поля прогрес\n  console.log(\n    '%c Заїзд розпочався, ставки не приймаються!',\n    'color: brown; font-size: 14px;'\n  );\n  determineWinner(promises); //визначення переможця\n  waitForAll(promises); //всі учасники фінішували\n}\n\n//визначення переможця\nfunction determineWinner(horsesPromises) {\n  //Promise.race приймає масив промісів, повертає один перший виконанний\n  Promise.race(horsesPromises).then(({ horse, time }) => {\n    updateWinnerField(`Переміг '${horse}', фінішував із часом: ${time}`);\n    console.log(\n      `%c Переміг '${horse}', фінішував із часом: ${time}`,\n      'color: green; font-size: 14px;'\n    );\n    updateResultTable({ horse, time, raceCounter });\n  });\n}\n\n//очікуємо всіх учасників\nfunction waitForAll(horsesPromises) {\n  // Promise.all приймає масив промісів, повертає всі проміси масивом\n  Promise.all(horsesPromises).then(x => {\n    updateProgressField('Заїзд закінчився, приймаються ставки.');\n\n    console.log('Усі учасники:', x);\n    console.log(\n      '%c Заїзд закінчився, приймаються ставки.',\n      'color: blue; font-size: 14px;'\n    );\n  });\n}\n\n//оновлення полів переможця і прогрессу\nfunction updateWinnerField(message) {\n  refs.winnerField.textContent = message;\n}\nfunction updateProgressField(message) {\n  refs.progressField.textContent = message;\n}\n//оновлення таблиці переможця\nfunction updateResultTable({ horse, time, raceCounter }) {\n  const tr = `<tr>\n      <td>${raceCounter}</td>\n      <td>${horse}</td>\n      <td>${time}</td>\n    </tr>`;\n  refs.tableBody.insertAdjacentHTML('beforeend', tr);\n}\n\n//запускаємо коня\nfunction run(horse) {\n  //повертаємо проміс\n  return new Promise(resolve => {\n    const time = getRandomTime(2000, 3500);\n\n    setTimeout(() => {\n      resolve({ horse, time });\n    }, time);\n  });\n}\n\n//імітація бігу коня\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n"],"names":["console","log","$15fa49afce3d3844$var$horses","$15fa49afce3d3844$var$raceCounter","$15fa49afce3d3844$var$refs","startBtn","document","querySelector","winnerField","progressField","tableBody","$15fa49afce3d3844$var$updateWinnerField","message","textContent","$15fa49afce3d3844$var$updateProgressField","addEventListener","promises","map","horse","Promise","resolve","min","max","time","Math","floor","random","setTimeout","$15fa49afce3d3844$var$run","horsesPromises","race","then","param","concat","raceCounter1","raceCounter","tr","insertAdjacentHTML","$15fa49afce3d3844$var$updateResultTable","all","x","$15fa49afce3d3844$var$waitForAll"],"version":3,"file":"module-09-Repeta.547d92fa.js.map"}