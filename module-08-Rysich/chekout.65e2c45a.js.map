{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,aCCyB,SAAhBC,EAAcC,EAASC,EAAKC,GACnC,IAAMC,EAAYC,OAAOJ,EAAQK,OAAOC,QAAQ,YAAYC,QAAQC,IAC9DC,EAAUR,EAAIS,MAAK,SAAAC,G,OAAKA,EAAFH,KAAgBL,C,IACtCS,EAAeX,EAAIY,QAAQJ,GACVR,EAAIa,OAAOF,EAAc,GACzBG,aAAVC,WAAWd,GACuBa,aAAlCE,QAAQf,EAAKgB,KAAKC,UAAUlB,G,CDF3C,IAIemB,EAJTC,EAAOC,SAASC,cAAc,YACpCF,EAAKG,iBAAiB,SAkCtB,SAAiBC,GACfA,EAAMC,kBAEwF,EAA9FC,EAAAC,iBAAgBH,GAGZA,EAAMpB,OAAOwB,UAAUC,SAAS,uBAClC/B,EAAc0B,EAAOM,EAAQlC,EAAAmC,OAAOC,YAEpCC,EAAaH,G,IAxCjB,IAAMA,EAA4D,QAAnDX,EAAAF,KAAKiB,MAAMpB,aAAaqB,QAAQvC,EAAAmC,OAAOC,oBAAY,IAAnDb,IAAuD,GAGtE,SAASc,EAAajC,GACpB,IAAIoC,EAEFA,EADEpC,EAAIqC,OACGrC,EACNsC,KACC,SAAA5B,G,IAAGH,EAAEG,EAAFH,GAAIgC,EAAG7B,EAAH6B,IAAKC,EAAI9B,EAAJ8B,K,MACV,oBAEQC,OADDlC,EAAG,mDACWkC,OAAbF,EAAI,WACVE,OADmBD,EAAK,gDACnBC,OAALD,EAAK,sO,IAUVE,KAAK,IAEE,wBAGAtB,EAAPuB,UAAYP,C,CA1BiBH,EAAvBH,E","sources":["src/module-08-Rysich/chekout.js","src/module-08-Rysich/helpers/removeProduct.js"],"sourcesContent":["import { common } from './common'; //ключі localStorage\n//import { createMarkup } from './helpers/createMarkup';\nimport { selectedProduct } from './helpers/selectedProduct'; //знаходимо обранний продукт; модальне вікно\nimport { removeProduct } from './helpers/removeProduct';\n\nconst list = document.querySelector('.js-list');\nlist.addEventListener('click', onClick);\n\n//розпаршуємо (продукти додані в корзину)\nconst basket = JSON.parse(localStorage.getItem(common.KEY_BASKET)) ?? []; //якщо в localStorage щось є - виведе, якщо пусто то присвоїть []\ncreateMarkup(basket);\n\nfunction createMarkup(arr) {\n  let markup;\n  if (arr.length) {\n    markup = arr\n      .map(\n        ({ id, img, name }) =>\n          `\n  <li data-id=\"${id}\" class=\"js-card list__card\">\n      <img src=\"${img}\" alt=\"${name}\" width='300' loading=\"lazy\"/>\n      <h2>${name}</h2>\n      <p >\n        <a class=\"js-info\" href=\"#\">More information</a>\n      </p>\n      <div class=\"list__button\">\n        \n        <button class=\"js-bascket-delete\">Видалити з корзини</button>\n      </div>\n    </li>`\n      )\n      .join('');\n  } else {\n    markup = `<p>Оберіть товар!</p>`;\n  }\n\n  list.innerHTML = markup;\n  //list.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onClick(event) {\n  event.preventDefault(); //відміна перезагрузки\n  //якщо натиснули на \"more information\": знаходимо продукт по id і виводимо модалку з інформацією про обранний продукт (через бібліотеці)\n  selectedProduct(event);\n\n  //якщо Натиснули на кнопку \"видалити з корзини\"\n  if (event.target.classList.contains('js-bascket-delete')) {\n    removeProduct(event, basket, common.KEY_BASKET); //передаєм елемент, масив продуктів корзини, ключ сховища\n    //перемальовуємо сторінку після видалення\n    createMarkup(basket, list);\n  }\n}\n","//видалення продукта із масиву favorite/basket\nfunction removeProduct(element, arr, KEY) {\n  const productId = Number(element.target.closest('.js-card').dataset.id); //знайшли id продукта, по батьку (closest)\n  const product = arr.find(({ id }) => id === productId); //продукт знайшли по id\n  const indexProduct = arr.indexOf(product); //індекс продукта в масиві favorite\n  const removedProduct = arr.splice(indexProduct, 1); //видаляємо з масиву favorite продукт\n  localStorage.removeItem(KEY); //видаляємо зі сховища, поки все, не знаю як щось одне з ключа\n  localStorage.setItem(KEY, JSON.stringify(arr)); //зберігаємо до сховища\n}\n\nexport { removeProduct };\n"],"names":["$kiqhF","parcelRequire","$c0b0fd08bb8ff93a$export$86a330d9a979afdd","element","arr","KEY","productId","Number","target","closest","dataset","id","product","find","param","indexProduct","indexOf","splice","localStorage","removeItem","setItem","JSON","stringify","$51c2cb905a8fb057$var$ref","$51c2cb905a8fb057$var$list","document","querySelector","addEventListener","event","preventDefault","$d7EWo","selectedProduct","classList","contains","$51c2cb905a8fb057$var$basket","common","KEY_BASKET","$51c2cb905a8fb057$var$createMarkup","parse","getItem","markup","length","map","img","name","concat","join","innerHTML"],"version":3,"file":"chekout.65e2c45a.js.map"}