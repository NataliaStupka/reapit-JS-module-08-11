{"mappings":"gfAAA,IAQkBA,EARlBC,EAAAC,EAAA,S,0BAKMC,EAAOC,SAASC,cAAc,YACpCF,EAAKG,iBAAiB,SAoCtB,SAAiBC,GAOA,GANfA,EAAMC,kBAGuD,EAA7DC,EAAAC,iBAAgBH,GAGZA,EAAMI,OAAOC,UAAUC,SAAS,cAAe,CACjD,IAAMC,GAAU,EAAAC,EAAAC,aAAYT,EAAMI,QAEH,GADbM,EAAUC,MAAK,SAAAC,G,OAAKA,EAAFC,KAAgBN,EAAQM,E,IAE1D,OAEFH,EAAUI,KAAKP,GACQQ,aAAVC,QAAQtB,EAAAuB,OAAOC,WAAYC,KAAKC,UAAUV,G,CAItB,GAA/BV,EAAMI,OAAOC,UAAUC,SAAS,sBAAuB,CACzD,IAAMe,EAAYC,OAAOtB,EAAMI,OAAOmB,QAAQ,YAAYC,QAAQX,IAC5DY,EAAUC,EAASC,MAAK,SAAAf,G,OAAKA,EAAFC,KAAgBQ,C,IAC3CO,EAAeF,EAASG,QAAQJ,GACfC,EAASI,OAAOF,EAAc,GAE9Bb,aAAVgB,WAAWrC,EAAAuB,OAAOe,cACyBjB,aAA3CC,QAAQtB,EAAAuB,OAAOe,aAAcb,KAAKC,UAAUM,IASzDO,EAAaP,E,KApEjB,IAGmCQ,EAH7BxB,EAA+D,QAAnDjB,EAAA0B,KAAKgB,MAAMpB,aAAaqB,QAAQ1C,EAAAuB,OAAOC,oBAAY,IAAnDzB,IAAuD,GAGnEiC,EAAgE,QAArDQ,EAAAf,KAAKgB,MAAMpB,aAAaqB,QAAQ1C,EAAAuB,OAAOe,sBAAc,IAArDE,IAAyD,GAG1E,SAASD,EAAaI,GACpB,IAAIC,EAEFA,EADED,EAAIE,OACGF,EACNG,KACC,SAAA5B,G,IAAGC,EAAED,EAAFC,GAAI4B,EAAG7B,EAAH6B,IAAKC,EAAI9B,EAAJ8B,K,MACV,oBAEQC,OADD9B,EAAG,mDACW8B,OAAbF,EAAI,WACVE,OADmBD,EAAK,gDACnBC,OAALD,EAAK,4S,IAUVE,KAAK,IAEE,wBAGAhD,EAAPiD,UAAYP,C,CA1BiBL,EAAvBP,E","sources":["src/module-08-Rysich/favorite.js"],"sourcesContent":["import { common } from './common'; //ключі localStorage\n//import { createMarkup } from './helpers/createMarkup'; //розмітка початкової сторінки інструментів\nimport { selectedProduct } from './helpers/selectedProduct'; //знаходимо обранний продукт; модальне вікно\nimport { findProduct } from './helpers/findProduct';\n\nconst list = document.querySelector('.js-list');\nlist.addEventListener('click', onClick);\n\nconst basketArr = JSON.parse(localStorage.getItem(common.KEY_BASKET)) ?? []; //для додати до корзини\n\n//розпаршуємо (обрані продукти)\nconst favorite = JSON.parse(localStorage.getItem(common.KEY_FAVORITE)) ?? []; //якщо в localStorage щось є - виведе, якщо пусто то присвоїть []\ncreateMarkup(favorite, list);\n\nfunction createMarkup(arr) {\n  let markup;\n  if (arr.length) {\n    markup = arr\n      .map(\n        ({ id, img, name }) =>\n          `\n  <li data-id=\"${id}\" class=\"js-card list__card\">\n      <img src=\"${img}\" alt=\"${name}\" width='300' loading=\"lazy\"/>\n      <h2>${name}</h2>\n      <p >\n        <a class=\"js-info\" href=\"#\">Більше інформації</a>\n      </p>\n      <div class=\"list__button\">\n        <button class=\"js-favorite-delete\">\"ЗРОБИТИ\" - Видалити з улюбленного</button>\n        <button class=\"js-bascket\">Додати до корзни</button>\n      </div>\n    </li>`\n      )\n      .join('');\n  } else {\n    markup = `<p>Оберіть товар!</p>`;\n  }\n\n  list.innerHTML = markup;\n  //list.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onClick(event) {\n  event.preventDefault(); //відміна перезагрузки\n  //якщо натиснули на \"more information\": знаходимо продукт по id\n  // і виводимо модалку з інформацією про обранний продукт(через бібліотеку)\n  selectedProduct(event);\n\n  //якщо натиснули на \"Add to basket\"\n  if (event.target.classList.contains('js-bascket')) {\n    const product = findProduct(event.target); //занйшли продукт по id, через функцію\n    const inStorage = basketArr.some(({ id }) => id === product.id); //не добавляємо продукт якщо він вже є в localStorage\n    if (inStorage) {\n      return;\n    }\n    basketArr.push(product); //добавляємо продукт в масив\n    localStorage.setItem(common.KEY_BASKET, JSON.stringify(basketArr));\n  }\n\n  //якщо натиснули на \"Видалити з улюбленного\" ?????\n  if (event.target.classList.contains('js-favorite-delete')) {\n    const productId = Number(event.target.closest('.js-card').dataset.id); //знайшли id продукта, по батьку (closest)\n    const product = favorite.find(({ id }) => id === productId); //продукт знайшли по id\n    const indexProduct = favorite.indexOf(product); //індекс продукта в масиві favorite\n    const removedProduct = favorite.splice(indexProduct, 1); //видаляємо з масиву favorite продукт\n\n    localStorage.removeItem(common.KEY_FAVORITE); //????? ЯК ВИДАЛИТИ НЕ ВЕСЬ КЛЮЧ ??????? бо прийдеться заново записувати у сховище:\n    localStorage.setItem(common.KEY_FAVORITE, JSON.stringify(favorite)); //JSON.stringify приводить до JSON формату\n\n    // console.log('id:', productId);\n    // console.log('name:', product.name);\n    // console.log('index:', indexProduct);\n    // console.log('Видаляємо:', removedProduct);\n    // console.log('arrFavorite:', favorite);\n\n    //перерендурюємо favorite\n    createMarkup(favorite);\n  }\n}\n"],"names":["$3fdd5fa33cb64f08$var$ref","$kiqhF","parcelRequire","$3fdd5fa33cb64f08$var$list","document","querySelector","addEventListener","event","preventDefault","$d7EWo","selectedProduct","target","classList","contains","product","$gLtFn","findProduct","$3fdd5fa33cb64f08$var$basketArr","some","param","id","push","localStorage","setItem","common","KEY_BASKET","JSON","stringify","productId","Number","closest","dataset","product1","$3fdd5fa33cb64f08$var$favorite","find","indexProduct","indexOf","splice","removeItem","KEY_FAVORITE","$3fdd5fa33cb64f08$var$createMarkup","$3fdd5fa33cb64f08$var$ref1","parse","getItem","arr","markup","length","map","img","name","concat","join","innerHTML"],"version":3,"file":"favorite.c2a7fdf0.js.map"}