{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MAAMC,EAAOC,SAASC,cAAc,YACpCF,EAAKG,iBAAiB,SAoCtB,SAAiBC,GAOA,GANfA,EAAMC,kBAGuD,EAA7DC,EAAAC,iBAAgBH,GAGZA,EAAMI,OAAOC,UAAUC,SAAS,cAAe,CACjD,MAAMC,GAAU,EAAAC,EAAAC,aAAYT,EAAMI,QAEH,GADbM,EAAUC,MAAK,EAACC,GAAEA,KAASA,IAAOL,EAAQK,KAE1D,OAEFF,EAAUG,KAAKN,GACQO,aAAVC,QAAQrB,EAAAsB,OAAOC,WAAYC,KAAKC,UAAUT,G,CAItB,GAA/BV,EAAMI,OAAOC,UAAUC,SAAS,sBAAuB,CACzD,MAAMc,EAAYC,OAAOrB,EAAMI,OAAOkB,QAAQ,YAAYC,QAAQX,IAC5DL,EAAUiB,EAASC,MAAK,EAACb,GAAEA,KAASA,IAAOQ,IAC3CM,EAAeF,EAASG,QAAQpB,GACfiB,EAASI,OAAOF,EAAc,GAE9BZ,aAAVe,WAAWnC,EAAAsB,OAAOc,cACyBhB,aAA3CC,QAAQrB,EAAAsB,OAAOc,aAAcZ,KAAKC,UAAUK,IASzDO,EAAaP,E,KApEjB,MAAMd,EAAYQ,KAAKc,MAAMlB,aAAamB,QAAQvC,EAAAsB,OAAOC,cAAgB,GAGnEO,EAAWN,KAAKc,MAAMlB,aAAamB,QAAQvC,EAAAsB,OAAOc,gBAAkB,GAG1E,SAASC,EAAaG,GACpB,IAAIC,EAEFA,EADED,EAAIE,OACGF,EACNG,KACC,EAACzB,GAAEA,EAAE0B,IAAEA,EAAGC,KAAEA,KACV,oBACO3B,mDACC0B,WAAaC,8CACnBA,+SAULC,KAAK,IAEC,wBAGC5C,EAAP6C,UAAYN,C,CA1BiBJ,EAAvBP","sources":["src/module-08-Rysich/favorite.js"],"sourcesContent":["import { common } from './common'; //ключі localStorage\n//import { createMarkup } from './helpers/createMarkup'; //розмітка початкової сторінки інструментів\nimport { selectedProduct } from './helpers/selectedProduct'; //знаходимо обранний продукт; модальне вікно\nimport { findProduct } from './helpers/findProduct';\n\nconst list = document.querySelector('.js-list');\nlist.addEventListener('click', onClick);\n\nconst basketArr = JSON.parse(localStorage.getItem(common.KEY_BASKET)) ?? []; //для додати до корзини\n\n//розпаршуємо (обрані продукти)\nconst favorite = JSON.parse(localStorage.getItem(common.KEY_FAVORITE)) ?? []; //якщо в localStorage щось є - виведе, якщо пусто то присвоїть []\ncreateMarkup(favorite, list);\n\nfunction createMarkup(arr) {\n  let markup;\n  if (arr.length) {\n    markup = arr\n      .map(\n        ({ id, img, name }) =>\n          `\n  <li data-id=\"${id}\" class=\"js-card list__card\">\n      <img src=\"${img}\" alt=\"${name}\" width='300' loading=\"lazy\"/>\n      <h2>${name}</h2>\n      <p >\n        <a class=\"js-info\" href=\"#\">Більше інформації</a>\n      </p>\n      <div class=\"list__button\">\n        <button class=\"js-favorite-delete\">\"ЗРОБИТИ\" - Видалити з улюбленного</button>\n        <button class=\"js-bascket\">Додати до корзни</button>\n      </div>\n    </li>`\n      )\n      .join('');\n  } else {\n    markup = `<p>Оберіть товар!</p>`;\n  }\n\n  list.innerHTML = markup;\n  //list.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onClick(event) {\n  event.preventDefault(); //відміна перезагрузки\n  //якщо натиснули на \"more information\": знаходимо продукт по id\n  // і виводимо модалку з інформацією про обранний продукт(через бібліотеку)\n  selectedProduct(event);\n\n  //якщо натиснули на \"Add to basket\"\n  if (event.target.classList.contains('js-bascket')) {\n    const product = findProduct(event.target); //занйшли продукт по id, через функцію\n    const inStorage = basketArr.some(({ id }) => id === product.id); //не добавляємо продукт якщо він вже є в localStorage\n    if (inStorage) {\n      return;\n    }\n    basketArr.push(product); //добавляємо продукт в масив\n    localStorage.setItem(common.KEY_BASKET, JSON.stringify(basketArr));\n  }\n\n  //якщо натиснули на \"Видалити з улюбленного\" ?????\n  if (event.target.classList.contains('js-favorite-delete')) {\n    const productId = Number(event.target.closest('.js-card').dataset.id); //знайшли id продукта, по батьку (closest)\n    const product = favorite.find(({ id }) => id === productId); //продукт знайшли по id\n    const indexProduct = favorite.indexOf(product); //індекс продукта в масиві favorite\n    const removedProduct = favorite.splice(indexProduct, 1); //видаляємо з масиву favorite продукт\n\n    localStorage.removeItem(common.KEY_FAVORITE); //????? ЯК ВИДАЛИТИ НЕ ВЕСЬ КЛЮЧ ??????? бо прийдеться заново записувати у сховище:\n    localStorage.setItem(common.KEY_FAVORITE, JSON.stringify(favorite)); //JSON.stringify приводить до JSON формату\n\n    // console.log('id:', productId);\n    // console.log('name:', product.name);\n    // console.log('index:', indexProduct);\n    // console.log('Видаляємо:', removedProduct);\n    // console.log('arrFavorite:', favorite);\n\n    //перерендурюємо favorite\n    createMarkup(favorite);\n  }\n}\n"],"names":["$deyUt","parcelRequire","$3a0f095e6251de3b$var$list","document","querySelector","addEventListener","event","preventDefault","$gDU5N","selectedProduct","target","classList","contains","product","$5GPHz","findProduct","$3a0f095e6251de3b$var$basketArr","some","id","push","localStorage","setItem","common","KEY_BASKET","JSON","stringify","productId","Number","closest","dataset","$3a0f095e6251de3b$var$favorite","find","indexProduct","indexOf","splice","removeItem","KEY_FAVORITE","$3a0f095e6251de3b$var$createMarkup","parse","getItem","arr","markup","length","map","img","name","join","innerHTML"],"version":3,"file":"favorite.fb145c4d.js.map"}